{% extends "layouts/base.html" %}

{% block title %} UI Tables {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
{% include 'includes/options.html' %}
<h2>Sprint</h2>

{% if validacionPermisos.crt_Sprint %}
<a class="btn btn-primary btn-sm" href="{% url 'webApp:sprintCrear' proyecto.id %}"><i
    class="material-icons">add</i>Crear
  Nuevo Sprint</a>
{% endif %}

<div class="container">
  {% for sp in sprint %}

  <div class="card mx-3 w-75">
    <div class="card-header">
      <h3>Nombre: {{sp.nombre_sp}}</h3>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-8">
          <p>Fecha Inicio: {{sp.fechaIni_sp}}</p>
          <p>Fecha Fin: {{sp.fechaFIn_sp}}</p>
          <p>Duracion: {{sp.proyecto_sp.sprint_dias}}</p>
          <p>Estado: {{sp.estado}}</p>

        </div>
        <div class="col-4 d-flex flex-column">
          {% if validacionPermisos.dsp_Colaborador_Sprint %}
          <a href="{% url 'webApp:sprintColaboradores' proyecto.id sp.id %}"
            class="btn btn-sm btn-primary">Colaboradores</a>
          {% endif %}
          {% if validacionPermisos.dsp_SprinBack %}
          <a href="{% url 'webApp:sprintBacklog' proyecto.id sp.id %}" class="btn btn-sm btn-primary">Sprint Backlog</a>
          {% endif %}
          
          <li class="nav-item"><a class="nav-link py-0" href="{% url 'webApp:visualizarBurndown' proyecto.id sprint.id %}"><span>Burndown Chart</span></a></li>
          {% if sp.estado.descripcion == "PENDIENTE" %}
          {% if validacionPermisos.dsp_Colaborador_Sprint %}
          <a href="{% url 'webApp:sprintUsAgregar' proyecto.id sp.id %}" class="btn btn-sm btn-primary">Agregar US</a>
          {% endif %}
          {% if validacionPermisos.dsp_Colaborador_Sprint %}
            <a href="{% url 'webApp:iniciarSprint' proyecto.id sp.id %}" class="btn btn-sm btn-success">Iniciar Sprint</a>
          {% endif %}
          {% endif %}
          {% if sp.estado.descripcion == "EN PROGRESO" %}
          {% if validacionPermisos.dsp_Tablero %}
          <a href="{% url 'webApp:sprintTablero' proyecto.id sp.id 0 %}" class="btn btn-sm btn-primary">Tablero</a>
          {% endif %}
          {% if validacionPermisos.dsp_Colaborador_Sprint %}
            <a href="{% url 'webApp:cancelarSprint' proyecto.id sp.id %}" class="btn btn-sm btn-danger">Cancelar Sprint</a>
          {% endif %}
          {% endif %}

        </div>

      </div>


    </div>
  </div>


  {% endfor %}

</div>
<style>
  div.card-container {
    width: 150px;
  }
</style>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}